import { Component, OnInit} from '@angular/core';
import { ExploitantService } from "../../../services";
import { map } from "rxjs/operators";
import {MatDialog} from '@angular/material/dialog';
import { Exploitant } from 'src/app/constant';
import { Router, ActivatedRoute } from '@angular/router';
import { ExploitantDetailComponent } from '../exploitant-detail/exploitant-detail.component';
import { DomaineCedarComponent } from '../../domaine/domaine-cedar.component';


@Component({
  selector: 'app-exploitant-list',
  templateUrl: './exploitant-list.component.html',
  styleUrls: ['./exploitant-list.component.css'],  
})
export class ExploitantListComponent implements OnInit {

  title = 'exploitants'

  exploitants: any
  filteredCedar: any

  constructor(
    private exploitantService: ExploitantService, 
    private matDialog: MatDialog,
    private activatedRoute: ActivatedRoute,
    private router: Router
  ) { }
  
  displayedColumnsExploitant: string[] = ['exploitant', 'competences', 'localisation', 'activity', 'specialite', 'action']
 
  ngOnInit(): void {     
    this.loadExploitantList()
    this.getTotalRow()
  }

  // @LoadingIndicator(['divLoad'])
  loadExploitantList(){
    this.exploitantService.getExploitantList().valueChanges().subscribe(
        exploitants => {
          this.exploitants = exploitants
        }
      )
  }

  // total row table
  getTotalRow(){
    return this.exploitants.length
  }
  
  // open modal exploitant
  openDialogAddCedar(){
    this.matDialog.open(DomaineCedarComponent)
  }

  openDialogDetailsExploitant(){ }

  // // delete 
  // deleteExploitant(exploitant: Exploitant){
  //   this.exploitantService.deleteById(exploitant.exploitantId)
  // }
}